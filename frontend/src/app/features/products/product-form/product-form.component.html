<div class="form-container fade-in">
    <div class="page-header">
        <h1 class="gradient-text">
            <mat-icon>{{ isEditMode ? 'edit' : 'add' }}</mat-icon>
            {{ isEditMode ? 'Kitap Düzenle' : 'Yeni Kitap Ekle' }}
        </h1>
    </div>

    <mat-card>
        <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
            <div class="form-grid">

                <mat-form-field appearance="outline">
                    <mat-label>Başlık</mat-label>
                    <input matInput formControlName="title" placeholder="Kitap başlığı">
                    <mat-error *ngIf="productForm.get('title')?.hasError('required')">Başlık zorunludur</mat-error>
                    <mat-error *ngIf="productForm.get('title')?.hasError('maxlength')">En fazla 80 karakter</mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Tür</mat-label>
                    <input matInput formControlName="type" placeholder="Ör: business, psychology">
                    <mat-error *ngIf="productForm.get('type')?.hasError('required')">Tür zorunludur</mat-error>
                    <mat-error *ngIf="productForm.get('type')?.hasError('maxlength')">En fazla 12 karakter</mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Fiyat</mat-label>
                    <input matInput type="number" formControlName="price" placeholder="0.00">
                    <span matTextSuffix>₺</span>
                    <mat-error *ngIf="productForm.get('price')?.hasError('min')">En az 0</mat-error>
                    <mat-error *ngIf="productForm.get('price')?.hasError('max')">En fazla 10,000</mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Telif Oranı (%)</mat-label>
                    <input matInput type="number" formControlName="royalty" placeholder="0">
                    <span matTextSuffix>%</span>
                    <mat-error *ngIf="productForm.get('royalty')?.hasError('min')">En az 0</mat-error>
                    <mat-error *ngIf="productForm.get('royalty')?.hasError('max')">En fazla 100</mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Yayın Tarihi</mat-label>
                    <input matInput [matDatepicker]="picker" formControlName="pubdate">
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
            </div>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Notlar</mat-label>
                <textarea matInput formControlName="notes" rows="4" placeholder="Kitap hakkında notlar"></textarea>
                <mat-error *ngIf="productForm.get('notes')?.hasError('maxlength')">En fazla 200 karakter</mat-error>
            </mat-form-field>

            <div class="form-actions">
                <button mat-button type="button" (click)="cancel()">
                    <mat-icon>cancel</mat-icon>
                    İptal
                </button>
                <button mat-raised-button color="primary" type="submit" [disabled]="productForm.invalid || loading">
                    <mat-icon>{{ isEditMode ? 'save' : 'add' }}</mat-icon>
                    {{ isEditMode ? 'Güncelle' : 'Ekle' }}
                </button>
            </div>
        </form>
    </mat-card>
</div>